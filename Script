local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Camera = workspace.CurrentCamera
local LocalPlayer = Players.LocalPlayer
local Drawing = Drawing or getgenv().Drawing

-- üñ•Ô∏è GUI Setup
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = game.CoreGui
ScreenGui.Enabled = true  -- Default to open when the script starts
ScreenGui.ResetOnSpawn = false

-- GUI Container
local guiFrame = Instance.new("Frame")
guiFrame.Size = UDim2.new(0, 250, 0, 300)
guiFrame.Position = UDim2.new(0.5, -125, 0.5, -150)
guiFrame.BackgroundTransparency = 0.6  -- 40% visibility
guiFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
guiFrame.BorderSizePixel = 0
guiFrame.Parent = ScreenGui

-- Rounded Corners
local UICorner = Instance.new("UICorner")
UICorner.CornerRadius = UDim.new(0, 12)
UICorner.Parent = guiFrame

-- üü¢ Title - Cheats Enabled
local titleText = Instance.new("TextLabel")
titleText.Text = "Cheats Enabled"
titleText.Size = UDim2.new(0, 200, 0, 30)
titleText.Position = UDim2.new(0.8, 0, 0, 10)
titleText.TextSize = 24
titleText.TextColor3 = Color3.fromRGB(255, 255, 255)
titleText.BackgroundTransparency = 1
titleText.TextStrokeTransparency = 0.5
titleText.TextStrokeColor3 = Color3.fromRGB(0, 0, 0)
titleText.Parent = ScreenGui

-- üü© ESP and Aimbot toggled states
local espEnabled = false
local aimbotEnabled = false

-- Rainbow Effect for "Cheats Enabled"
local function updateRainbowTextColor()
    local hue = tick() % 5 / 5
    titleText.TextColor3 = Color3.fromHSV(hue, 1, 1)
end

-- üü© ESP Button
local espToggleButton = Instance.new("TextButton")
espToggleButton.Size = UDim2.new(0, 200, 0, 50)
espToggleButton.Position = UDim2.new(0, 10, 0, 60)
espToggleButton.Text = "Toggle ESP"
espToggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
espToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
espToggleButton.Parent = guiFrame

-- üüß Aimbot Button
local aimbotToggleButton = Instance.new("TextButton")
aimbotToggleButton.Size = UDim2.new(0, 200, 0, 50)
aimbotToggleButton.Position = UDim2.new(0, 10, 0, 120)
aimbotToggleButton.Text = "Toggle Aimbot"
aimbotToggleButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
aimbotToggleButton.TextColor3 = Color3.fromRGB(255, 255, 255)
aimbotToggleButton.Parent = guiFrame

-- üü® FOV Size Button
local fovButton = Instance.new("TextButton")
fovButton.Size = UDim2.new(0, 200, 0, 50)
fovButton.Position = UDim2.new(0, 10, 0, 180)
fovButton.Text = "Change FOV"
fovButton.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
fovButton.TextColor3 = Color3.fromRGB(255, 255, 255)
fovButton.Parent = guiFrame

-- üü© Rounded Button Corners
local function addUICornerToButton(button)
    local UICorner = Instance.new("UICorner")
    UICorner.CornerRadius = UDim.new(0, 12)
    UICorner.Parent = button
end

addUICornerToButton(espToggleButton)
addUICornerToButton(aimbotToggleButton)
addUICornerToButton(fovButton)

-- FOV settings
local fovSizes = {80, 150, 250}
local fovIndex = 1
local currentFov = fovSizes[fovIndex]

-- üü† Draw the circle (FOV)
local fovCircle = Drawing.new("Circle")
fovCircle.Color = Color3.fromRGB(255, 255, 0)
fovCircle.Thickness = 2
fovCircle.Transparency = 0.5
fovCircle.Filled = false
fovCircle.Position = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
fovCircle.Radius = currentFov

-- üéØ Draw annotation text
local fovText = Drawing.new("Text")
fovText.Position = Vector2.new(10, Camera.ViewportSize.Y - 40)
fovText.Size = 24
fovText.Center = false
fovText.Outline = true
fovText.Color = Color3.fromRGB(255, 255, 255)
fovText.Text = "FOV: " .. currentFov .. " üéØ"
fovText.Visible = true

-- üîò Toggle FOV size
fovButton.MouseButton1Click:Connect(function()
    fovIndex = fovIndex % #fovSizes + 1
    currentFov = fovSizes[fovIndex]
    fovCircle.Radius = currentFov
    fovText.Text = "FOV: " .. currentFov .. " üéØ"
end)

-- üß† Aimbot logic
local aiming = false

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if input.UserInputType == Enum.UserInputType.MouseButton2 and aimbotEnabled then
        aiming = true
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton2 then
        aiming = false
    end
end)

function getClosestHead()
    local closestPlayer = nil
    local closestDistance = math.huge

    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
            local head = player.Character.Head
            local screenPos, onScreen = Camera:WorldToViewportPoint(head.Position)

            if onScreen then
                local mousePos = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)
                local dist = (Vector2.new(screenPos.X, screenPos.Y) - mousePos).Magnitude

                -- Only use the player if they are inside the FOV circle
                if dist < currentFov and dist < closestDistance then
                    closestDistance = dist
                    closestPlayer = player
                end
            end
        end
    end

    if closestPlayer and closestPlayer.Character then
        return closestPlayer.Character:FindFirstChild("Head")
    end
end

RunService.RenderStepped:Connect(function()
    fovCircle.Position = Vector2.new(Camera.ViewportSize.X / 2, Camera.ViewportSize.Y / 2)

    if aiming then
        local targetHead = getClosestHead()
        if targetHead then
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, targetHead.Position)
        end
    end
end)

-- üü¢ Toggle ESP button
espToggleButton.MouseButton1Click:Connect(function()
    espEnabled = not espEnabled
    if espEnabled then
        espToggleButton.Text = "Toggle ESP (ON)"
    else
        espToggleButton.Text = "Toggle ESP (OFF)"
    end
    updateCheatsStatus()
end)

-- üü† Toggle Aimbot button
aimbotToggleButton.MouseButton1Click:Connect(function()
    aimbotEnabled = not aimbotEnabled
    if aimbotEnabled then
        aimbotToggleButton.Text = "Toggle Aimbot (ON)"
        fovCircle.Visible = true  -- Show FOV circle when Aimbot is turned on
    else
        aimbotToggleButton.Text = "Toggle Aimbot (OFF)"
        fovCircle.Visible = false  -- Hide FOV circle when Aimbot is turned off
    end
    updateCheatsStatus()
end)

-- üü© Update Cheats Enabled label to show all active cheats
local function updateCheatsStatus()
    local status = "Cheats Enabled: "
    if espEnabled then status = status .. "ESP " end
    if aimbotEnabled then status = status .. "Aimbot " end

    if status == "Cheats Enabled: " then
        titleText.Text = "No Cheats Active"
    else
        titleText.Text = status
    end
end

--
